<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

  <link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../css/style_carlos.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"> </script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../css/style.css">
  <link rel="stylesheet" media="screen" type="text/css" href="../css/style_carlos.css">

</head>
<header></header>
<body>

  <div id="particles-js"></div>

  <div id="container" class="container blog-container">
   
  </div>

</body>
<footer></footer>
</html>

<script>
  
  function getArticles() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 && this.status == 200) {
        let container = document.getElementById("container"); 
        let responses = JSON.parse(this.responseText);
        for(var i = 0; i < responses.length; i++) {
          container.insertAdjacentHTML("afterbegin", '<div class="blog backcolor blog__new blog"><img class="blog__img" src="/assets/images/'+responses[i].image+'" alt="Image Title" /> <div class="blog__text tcolor"><h1 class="blog__title blog__new"><a href="#">'+responses[i].title+'</a></h1> <div class="blog__line"></div> <div class="blog__preview-text">'+responses[i].preview+'</div> <ul class="blog__button"> <li class="blog__readmore play blog__new"> <a id="'+responses[i].id+'" href="/article.html?id='+responses[i].id+'">Read more...</a></li></ul></div></div>');
        }
      }
    };
    xhttp.open("GET", "./articles/show", true);
    xhttp.send();
  }

  getArticles();
    /*function load (){
	  return new Promise(function(resolve,reject){
        $.getJSON("/json/blog.json", function(json){
          $.each(json.blog_new, function(add_new) {
            var new_img = '<div class="blog backcolor blog__new blog"><img class="blog__img" src="'+this.image+'" alt="Image Title" />';
            var new_title = '<div class="blog__text tcolor"><h1 class="blog__title blog__new"><a href="#">'+this.title+'</a></h1>';
            var new_text = '<div class="blog__line"></div> <div class="blog__preview-text">'+this.preview+'</div>';
            var new_link = '<ul class="blog__button"> <li class="blog__readmore play blog__new"> <a id="'+this.id+'" href="/article.html">Read more...</a></li></ul></div></div>';
            var new_container = new_img+new_title+new_text+new_link;
            $('.blog-container').append(new_container);
            resolve("load");
          });
        });
      });
    }

    $(document).ready(async function(){
        await load();
        
        $('header').load('./header');
	  $('footer').load('./footer');
  });*/
  $('header').load('./header');
	  $('footer').load('./footer');
</script>

<script src="/js/particles.min.js"></script>
<script src="/js/app.js"></script>
